import {BridgeServer} from 'react-native-http-bridge-refurbished';
let results: any[] = [];

const server = new BridgeServer('http_service', true);

server.get('/ping', async (_req, _res) => {
  return {message: 'pong'};
});

server.get('/results', async (_req, _res) => {
  return {results};
});

server.listen(9000);

export function startServer() {
  return server;
}

export function stopServer() {
  server.stop();
}

export function setServerResults(r: any[]) {
  console.log('Setting server results');
  results = r;
}

export function setServerError(e: any) {
  console.error(`Setting server error: ${e}`);
  results = e;
}

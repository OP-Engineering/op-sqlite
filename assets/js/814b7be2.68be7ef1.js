"use strict";(self.webpackChunkop_sqlite=self.webpackChunkop_sqlite||[]).push([[10],{4166:(e,i,t)=>{t.r(i),t.d(i,{assets:()=>r,contentTitle:()=>l,default:()=>p,frontMatter:()=>d,metadata:()=>n,toc:()=>a});const n=JSON.parse('{"id":"Libsql/updating","title":"Updating Libsql","description":"Re-compile the C binary for iOS and Android","source":"@site/docs/Libsql/updating.md","sourceDirName":"Libsql","slug":"/Libsql/updating","permalink":"/op-sqlite/docs/Libsql/updating","draft":false,"unlisted":false,"editUrl":"https://github.com/OP-Engineering/op-sqlite/blob/main/docs/Libsql/updating.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Getting Started","permalink":"/op-sqlite/docs/Libsql/start"}}');var s=t(4848),o=t(8453);const d={},l="Updating Libsql",r={},a=[{value:"Re-compile the C binary for iOS and Android",id:"re-compile-the-c-binary-for-ios-and-android",level:2},{value:"Submit a PR to op-sqlite",id:"submit-a-pr-to-op-sqlite",level:2}];function c(e){const i={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.header,{children:(0,s.jsx)(i.h1,{id:"updating-libsql",children:"Updating Libsql"})}),"\n",(0,s.jsx)(i.h1,{id:"submitting-libsql-updates",children:"Submitting libsql updates"}),"\n",(0,s.jsx)(i.h2,{id:"re-compile-the-c-binary-for-ios-and-android",children:"Re-compile the C binary for iOS and Android"}),"\n",(0,s.jsx)(i.p,{children:"PR which originally introduced support for iOS/Android"}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.a,{href:"https://github.com/tursodatabase/libsql/pull/1423/files",children:"https://github.com/tursodatabase/libsql/pull/1423/files"})}),"\n",(0,s.jsxs)(i.p,{children:["You only need to navigate to the ",(0,s.jsx)(i.code,{children:"bindings/c"})," folder and run the make scripts to generate the files"]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:"cd libsql/bindings/c\nmake ios\nmake android\n"})}),"\n",(0,s.jsx)(i.p,{children:"Sqlcipher/Crypto support is disabled for now, just needs someone to put the time to get it to compile. The makefile then compiles libsql for iOS/Android, RN just consumes these modules natively but can be consumed by any iOS/Android app."}),"\n",(0,s.jsx)(i.h2,{id:"submit-a-pr-to-op-sqlite",children:"Submit a PR to op-sqlite"}),"\n",(0,s.jsxs)(i.p,{children:["Afterwards you will have a bunch of files on the ",(0,s.jsx)(i.code,{children:"bindings/c/generated"})," folder. You need to replace the ",(0,s.jsx)(i.code,{children:"libsql.xcframework"})," to ",(0,s.jsx)(i.code,{children:"op-sqlite/ios/libsql.xcframework"}),". Then you need to copy the ",(0,s.jsx)(i.code,{children:"jniLibs"})," to ",(0,s.jsx)(i.code,{children:"op-sqlite/android/"}),"."]}),"\n",(0,s.jsxs)(i.p,{children:["As long as you have not changed the headers and bindings submitting a PR will be enough, there are automated tests that will build the app to make sure everything is compiling. If you did modify the headers you also need to update the file at ",(0,s.jsx)(i.code,{children:"cpp/libsql/libsql.h"})," ."]})]})}function p(e={}){const{wrapper:i}={...(0,o.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453:(e,i,t)=>{t.d(i,{R:()=>d,x:()=>l});var n=t(6540);const s={},o=n.createContext(s);function d(e){const i=n.useContext(o);return n.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function l(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),n.createElement(o.Provider,{value:i},e.children)}}}]);